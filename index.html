<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>115å¹´åº¦è‡ºå¤§é†«ç™‚é«”ç³»æ–°é€²ä¸»æ²»é†«å¸«èˆ‡é†«äº‹äººå“¡ç ”ç©¶ç‡Ÿ</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@300;400;500;700&display=swap');
        
        :root {
            --c-primary: #514283;
            --c-secondary: #cac5ed;
            --c-light: #e1ddf4;
            --c-lighter: #dfcff3;
            --c-accent: #f0c3e2;
        }

        body {
            font-family: 'Noto Sans TC', sans-serif;
            background-color: var(--c-light);
            color: var(--c-primary);
            -webkit-font-smoothing: antialiased;
        }

        .no-scrollbar::-webkit-scrollbar { display: none; }
        .no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }

        .glass-header {
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(12px);
            border-bottom: 1px solid rgba(255,255,255,0.6);
        }

        .glass-card {
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(8px);
            border: 1px solid rgba(255, 255, 255, 0.6);
            box-shadow: 0 8px 32px rgba(81, 66, 131, 0.05);
        }

        .tap-effect { transition: transform 0.1s ease, background-color 0.2s; }
        .tap-effect:active { transform: scale(0.96); }
        
        @keyframes scaleIn { 0% { transform: scale(0.95); opacity: 0; } 100% { transform: scale(1); opacity: 1; } }
        .anim-scale-in { animation: scaleIn 0.3s cubic-bezier(0.34, 1.56, 0.64, 1); }
    </style>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        brand: { deep: '#514283', medium: '#cac5ed', light: '#e1ddf4', pale: '#dfcff3', pink: '#f0c3e2' }
                    }
                }
            }
        }
    </script>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useRef } = React;

        // =========================================================================
        // è¨­å®šå€ï¼šæ‚¨çš„ Google Apps Script ç¶²é æ‡‰ç”¨ç¨‹å¼ç¶²å€ (éƒ¨ç½²å¾Œçš„ URL)
        // =========================================================================
        const GOOGLE_SCRIPT_URL = "https://script.google.com/macros/s/AKfycbyLkbu0cN5XLrcLsFU-pisf-uV5IveVzirsYp63OBEpe_83Q2JSvUh6elauX_YPCuVnfg/exec"; 
        
        // æ´»å‹•ç¶²é  (è¿”å›æŒ‰éˆ•ç”¨)
        const EVENT_PAGE_URL = "https://linktr.ee/ntuhmed";
        // =========================================================================

        // --- Icons ---
        const IconWrapper = ({ children, size = 24, className = "" }) => (<svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>{children}</svg>);
        const RotateCcw = (props) => (<IconWrapper {...props}><path d="M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8" /><path d="M3 3v5h5" /></IconWrapper>);
        const Check = (props) => (<IconWrapper {...props}><polyline points="20 6 9 17 4 12" /></IconWrapper>);
        const Send = (props) => (<IconWrapper {...props}><line x1="22" y1="2" x2="11" y2="13" /><polygon points="22 2 15 22 11 13 2 9 22 2" /></IconWrapper>);
        const Heart = (props) => (<IconWrapper {...props}><path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z" /></IconWrapper>);
        const Sparkles = (props) => (<IconWrapper {...props}><path d="m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L12 3Z" /><path d="M5 3v4" /><path d="M9 3v4" /><path d="M3 5h4" /><path d="M3 9h4" /></IconWrapper>);
        const X = (props) => (<IconWrapper {...props}><line x1="18" y1="6" x2="6" y2="18" /><line x1="6" y1="6" x2="18" y2="18" /></IconWrapper>);
        const User = (props) => (<IconWrapper {...props}><path d="M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2" /><circle cx="12" cy="7" r="4" /></IconWrapper>);
        const Facebook = (props) => (<IconWrapper {...props}><path d="M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z" /></IconWrapper>);
        const LinkIcon = (props) => (<IconWrapper {...props}><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71" /><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71" /></IconWrapper>);
        const Home = (props) => (<IconWrapper {...props}><path d="m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z" /><polyline points="9 22 9 12 15 12 15 22" /></IconWrapper>);
        const Loader = (props) => (<IconWrapper {...props}><path d="M21 12a9 9 0 1 1-6.219-8.56" /></IconWrapper>);

        // Lecture Data
        const lectureOptions = [
            { title: "é†«å¸«èˆ‡é†«äº‹äººå“¡ç§‘å­¸å®¶ä¹‹å€«ç†ç´ é¤Š", speaker: "è”¡ç”«æ˜Œ ä¸»ä»»" },
            { title: "æ•™å­¸éƒ¨è¬›é¡Œï¼šæ•™å­¸è³‡æºèˆ‡è¦ç¯„", speaker: "æ¥Šå¿—å‰ å‰¯ä¸»ä»»" },
            { title: "å¾ç«™ç©©è…³æ­¥åˆ°ç²¾ç›Šæ±‚ç²¾ï¼šå€‹äººæ°¸çºŒç™¼å±•ä¹‹è·¯", speaker: "é™³æ…§ç² ä¸»ä»»" },
            { title: "å€‹äººç ”ç©¶èˆ‡å‡ºåœ‹é€²ä¿®åˆ†äº«", speaker: "é˜æ¡‚å½¬ åŠ©ç†æ•™æˆ" },
            { title: "å¦‚ä½•ç™¼èµ·åŠåŸ·è¡Œè‡¨åºŠè©¦é©—ï¼Ÿ", speaker: "åŠ‰å¿—éŠ˜ æ•™æˆ" },
            { title: "é€éç”Ÿé†«è¨­è¨ˆæµç¨‹è§£æ±ºè‡¨åºŠå•é¡Œ", speaker: "é»ƒåšæµ© å‰¯æ•™æˆ" },
            { title: "è‡¨åºŠèˆ‡åŸºç¤ç ”ç©¶çš„é¸æ“‡", speaker: "æ—é Œç„¶ ä¸»ä»»" },
            { title: "è­·ç†éƒ¨åˆ†äº«", speaker: "é„­éœå®œ è­·ç†å¸«" },
            { title: "æª¢é©—é†«å­¸éƒ¨åˆ†äº«", speaker: "é™³æ€¡å©· é†«æª¢å¸«" },
            { title: "è—¥åŠ‘éƒ¨åˆ†äº«", speaker: "æ—æ¬£å„€ è—¥å¸«" },
            { title: "è®“ç¨®å­ç™¼å…‰ï¼šç¸½åˆ†é™¢è‚²è‹—è¨ˆç•«åˆ†äº«", speaker: "æ¥Šå‰å‹› æ•™æˆ / æå¿—åœ‹ åŠ©ç†æ•™æˆ" },
            { title: "é™¢å…§ç ”ç©¶è³‡æºï¼å…±åŒç ”ç©¶å®¤èˆ‡ç ”ç©¶æœå‹™æ ¸å¿ƒ", speaker: "è”¡èŠ·å­£ çµ„é•·" },
            { title: "é™¢å…§è¨ˆç•«ç°¡ä»‹æ‡¶äººåŒ…", speaker: "æ¥Šé§éµ çµ„é•·" },
            { title: "ä½¿ç”¨é†«ç™‚æ•´åˆè³‡æ–™å‰µæ–°ç ”ç™¼", speaker: "æå®œå®¶ å‰¯ä¸»ä»»" },
            { title: "ç”Ÿæˆå¼ AI è¼”åŠ©ç ”ç©¶æ‡¶äººåŒ…", speaker: "èŠåˆä¸ è³‡è¨Šå·¥ç¨‹å¸«" },
            { title: "ç ”ç©¶å‚³æ’­å·¥å…·ï¼šè¦–è¦ºåŒ–è¨­è¨ˆèˆ‡å¯è¿‘ç”¨æ€§è©•ä¼°", speaker: "å¼µè‚²ç‘„ ä¸»æ²»é†«å¸«" },
            { title: "ä¸»æ²»é†«å¸«å‡ç­‰èˆ‡ç¶“é©—åˆ†äº«", speaker: "æ—å­Ÿæš æ•™æˆ" },
            { title: "ç§‘ç ”å‰µæ–° Ã— å°ˆåˆ©æ€ç¶­ï¼šå°ˆåˆ©ç”³è«‹èˆ‡æŠ€è½‰å¯¦å‹™", speaker: "æ¥Šå®—éœ– å‰¯ç ”ç™¼é•·" }
        ];

        // --- Components ---
        const SelectionCard = ({ label, selected, onClick }) => (
            <div onClick={onClick} className={`tap-effect p-3 rounded-xl border-2 cursor-pointer flex items-center justify-between group relative overflow-hidden transition-all h-full ${selected ? 'border-brand-deep bg-white shadow-md' : 'border-transparent bg-white/50 hover:bg-white hover:border-brand-medium'}`}>
                {selected && <div className="absolute inset-0 bg-brand-medium/20 pointer-events-none" />}
                <span className={`font-medium z-10 text-sm ${selected ? 'text-brand-deep font-bold' : 'text-gray-600'}`}>{label}</span>
                {selected && <div className="w-5 h-5 rounded-full flex-shrink-0 flex items-center justify-center bg-brand-deep z-10"><Check size={12} className="text-white" /></div>}
            </div>
        );

        const RatingBlock = ({ title, value, onChange, required, error }) => {
            const options = [
                { val: "5", label: "éå¸¸æ»¿æ„" }, { val: "4", label: "æ»¿æ„" }, { val: "3", label: "æ™®é€š" },
                { val: "2", label: "ä¸æ»¿æ„" }, { val: "1", label: "éå¸¸ä¸æ»¿æ„" }, { val: "0", label: "ç„¡æ„è¦‹" }
            ];
            const handleClear = (e) => { e.stopPropagation(); onChange(""); };
            return (
                <div className={`mb-6 glass-card rounded-3xl p-5 relative overflow-hidden group border transition-colors ${error ? 'border-red-400 bg-red-50' : 'border-white'}`}>
                    <div className="absolute top-0 right-0 w-24 h-24 bg-brand-pink/20 rounded-full -mr-10 -mt-10 blur-xl pointer-events-none"></div>
                    <div className="flex justify-between items-start mb-4 relative z-10">
                        <h3 className={`font-bold text-lg flex items-center ${error ? 'text-red-600' : 'text-brand-deep'}`}>{title} {required && <span className="text-brand-pink ml-1 text-xs">â—</span>}</h3>
                        {value && (
                            <button onClick={handleClear} className="text-xs flex items-center gap-1 text-gray-400 hover:text-brand-deep transition-colors px-2 py-1 rounded-full hover:bg-brand-light" title="æ¸…é™¤é¸æ“‡"><RotateCcw size={12} /> é‡å¡«</button>
                        )}
                    </div>
                    <div className="grid grid-cols-3 gap-2 relative z-10">
                        {options.map((opt) => (
                            <button key={opt.val} type="button" onClick={() => onChange(value === opt.val ? "" : opt.val)}
                                className={`tap-effect py-3 px-1 rounded-xl text-sm font-medium transition-all duration-300 border ${value === opt.val ? 'bg-brand-deep text-white border-brand-deep shadow-lg shadow-brand-deep/30' : 'bg-white text-gray-500 border-transparent hover:border-brand-medium hover:bg-brand-light/30'}`}>
                                {opt.label}
                            </button>
                        ))}
                    </div>
                    {error && <p className="text-red-500 text-xs mt-2">* è«‹é¸æ“‡ä¸€å€‹é …ç›®</p>}
                </div>
            );
        };

        // --- Main App ---
        const App = () => {
            const [formData, setFormData] = useState({
                campus: "", role: "", lectureDifficulty: "", lecturePracticality: "", lectureTime: "", lectureAttraction: "", lectureCompleteness: "",
                bestLectures: [], touchingSpeaker: "", researchHelp: "", foundPartner: "", partnerCount: "",
                venueComfort: "", transport: "", serviceQuality: "", foodQuality: "", accomodation: "",
                futureTiming: "", suggestions: "", overallSatisfaction: ""
            });
            const [submitted, setSubmitted] = useState(false);
            const [isSubmitting, setIsSubmitting] = useState(false);
            const [errors, setErrors] = useState({});
            const scrollRef = useRef(null);

            const handleValueChange = (name, value) => {
                setFormData(prev => ({ ...prev, [name]: prev[name] === value ? "" : value }));
                if (value) setErrors(prev => ({ ...prev, [name]: false }));
            };
            const handleRatingChange = (name, value) => {
                setFormData(prev => ({ ...prev, [name]: value }));
                if (value) setErrors(prev => ({ ...prev, [name]: false }));
            };
            const handleCheckboxChange = (value) => {
                setFormData(prev => {
                    const current = prev.bestLectures;
                    return { ...prev, bestLectures: current.includes(value) ? current.filter(i => i !== value) : [...current, value] };
                });
            };

            const goToEventPage = () => {
                window.location.href = EVENT_PAGE_URL;
            };

            const validateForm = () => {
                const newErrors = {};
                let isValid = true;
                const fieldNames = {
                    campus: 'æœå‹™é™¢å€', role: 'åƒåŠ èº«åˆ†', lectureDifficulty: 'è¬›é¡Œé›£æ˜“åº¦', lecturePracticality: 'è¬›é¡Œå¯¦ç”¨æ€§', lectureTime: 'è¬›é¡Œæ™‚é–“è¦åŠƒ',
                    lectureAttraction: 'å…§å®¹å¸å¼•åŠ›', lectureCompleteness: 'èª²ç¨‹è¦åŠƒå®Œæ•´æ€§', researchHelp: 'å°ç ”ç©¶æœ‰å¹«åŠ©', foundPartner: 'æ˜¯å¦æ‰¾åˆ°åˆä½œå¤¥ä¼´', 
                    partnerCount: 'åˆä½œå¤¥ä¼´äººæ•¸', venueComfort: 'å ´åœ°èˆ’é©æ€§', transport: 'äº¤é€šä¾¿åˆ©æ€§', serviceQuality: 'æœå‹™å“è³ª',
                    foodQuality: 'ç”¨é¤ç’°å¢ƒå“è³ª', accomodation: 'ä½å®¿èˆ’é©åº¦', futureTiming: 'å»ºè­°è¾¦ç†æ™‚é–“', overallSatisfaction: 'æ•´é«”æ»¿æ„åº¦'
                };
                const missingFields = [];
                const requiredFields = [
                    'campus', 'role', 'lectureDifficulty', 'lecturePracticality', 'lectureTime', 'lectureAttraction', 'lectureCompleteness',
                    'researchHelp', 'foundPartner', 'venueComfort', 'transport', 'serviceQuality', 'foodQuality', 'accomodation',
                    'futureTiming', 'overallSatisfaction'
                ];

                requiredFields.forEach(field => {
                    if (!formData[field]) {
                        newErrors[field] = true;
                        isValid = false;
                        missingFields.push(fieldNames[field] || field);
                    }
                });

                if (formData.foundPartner === 'æ˜¯' && !formData.partnerCount) {
                    newErrors.partnerCount = true;
                    isValid = false;
                    missingFields.push(fieldNames['partnerCount']);
                }

                setErrors(newErrors);
                return { isValid, missingFields };
            };

            const handleSubmit = (e) => {
                const { isValid, missingFields } = validateForm();
                
                if (!isValid) {
                    alert("å°šæœ‰æ¬„ä½æœªå¡«å¯«ï¼Œè«‹æª¢æŸ¥ä»¥ä¸‹é …ç›®ï¼š\n\n" + missingFields.join("ã€"));
                    if(scrollRef.current) scrollRef.current.scrollTop = 0;
                    return;
                }

                setIsSubmitting(true);

                // Use fetch for external calls (e.g., from GitHub Pages)
                fetch(GOOGLE_SCRIPT_URL, {
                    method: 'POST',
                    body: JSON.stringify(formData),
                    headers: {
                        'Content-Type': 'text/plain;charset=utf-8', // Important for GAS to avoid CORS preflight
                    },
                    mode: 'no-cors' // Allows sending data without reading response (cross-origin)
                })
                .then(response => {
                    // With no-cors, we can't check response.ok or get JSON
                    // We assume success if no network error occurred
                    setSubmitted(true);
                    setIsSubmitting(false);
                    window.scrollTo(0, 0);
                })
                .catch(error => {
                    console.error('Error:', error);
                    alert("å‚³é€å¤±æ•—ï¼Œè«‹æª¢æŸ¥ç¶²è·¯é€£ç·šæˆ–ç¨å¾Œå†è©¦ã€‚");
                    setIsSubmitting(false);
                });
            };

            if (submitted) {
                return (
                    <div className="min-h-screen bg-brand-light flex flex-col items-center justify-start p-6 overflow-y-auto no-scrollbar">
                        <div className="glass-card w-full max-w-md rounded-[2rem] p-8 text-center space-y-6 anim-scale-in my-auto">
                            <div className="w-24 h-24 bg-brand-pale rounded-full flex items-center justify-center mx-auto relative">
                                <Sparkles size={40} className="text-brand-deep absolute animate-pulse" />
                                <div className="absolute inset-0 rounded-full border-4 border-brand-accent opacity-30 animate-ping"></div>
                            </div>
                            <div>
                                <h2 className="text-2xl font-bold text-brand-deep mb-2">æ„Ÿè¬æ‚¨çš„å¡«å¯«</h2>
                                <p className="text-gray-600 text-sm leading-relaxed mb-4">æˆ‘å€‘å°‡å½™æ•´æ‚¨çš„æ„è¦‹åšç‚ºæœªä¾†è¾¦ç†æ´»å‹•ä¹‹åƒè€ƒï¼ï¼</p>
                                
                                <div className="bg-brand-light/50 p-4 rounded-xl text-sm text-gray-700 space-y-2 border border-brand-medium/30 text-left">
                                    <p className="font-bold text-brand-deep border-b border-brand-medium/30 pb-1 mb-2">è¯çµ¡è³‡è¨Š</p>
                                    <p>æœ‰ä»»ä½•å•é¡Œè«‹èˆ‡ç¸½é™¢é†«ç ”éƒ¨æ‰¿è¾¦çª—å£è¯ç¹«ï¼š</p>
                                    <p className="font-medium text-brand-deep">é™³å°å§ (åˆ†æ©Ÿ 263254)</p>
                                    <p>Email: <a href="mailto:summerchen@ntuh.gov.tw" className="text-blue-600 underline">summerchen@ntuh.gov.tw</a></p>
                                </div>
                                <p className="text-brand-deep font-bold mt-4">è¬è¬æ‚¨çš„åƒåŠ ï¼</p>
                            </div>

                            <div className="bg-white/60 rounded-2xl p-4 text-left border border-brand-medium/50">
                                <h3 className="font-bold text-brand-deep flex items-center gap-2 mb-3">
                                    <span className="bg-brand-pink text-white text-[10px] px-2 py-0.5 rounded-full">å»£å‘Šæ™‚é–“</span> è¿½è¹¤æˆ‘å€‘
                                </h3>
                                <p className="text-xs text-gray-600 mb-4 leading-relaxed">æœ¬éƒ¨è¨­æœ‰è‡‰æ›¸å…¬é–‹ç²‰çµ²åœ˜(åˆ†äº«å…¬é–‹è¨Šæ¯)èˆ‡ç§˜å¯†ç¤¾åœ˜(å…¬å‘Šé™¢å…§é™å®šä¹‹æœ€æ–°è¨Šæ¯)ï¼Œæ­¡è¿åŠ å…¥ï¼</p>
                                <div className="space-y-3">
                                    <a href="https://www.facebook.com/med.researchntuh" target="_blank" className="flex items-center gap-3 p-3 bg-white rounded-xl border border-gray-100 hover:border-brand-medium transition-colors group">
                                        <div className="w-10 h-10 bg-blue-50 rounded-full flex items-center justify-center text-blue-600 group-hover:scale-110 transition-transform"><Facebook size={20} /></div>
                                        <div className="flex-1"><div className="font-bold text-gray-800 text-sm">é†«ç ”å°ç·¨</div><div className="text-xs text-gray-500">åŠ å¥½å‹é€²ç¤¾åœ˜ç”¨</div></div>
                                        <LinkIcon size={16} className="text-gray-400" />
                                    </a>
                                    <a href="https://www.facebook.com/ntuhlard" target="_blank" className="flex items-center gap-3 p-3 bg-white rounded-xl border border-gray-100 hover:border-brand-medium transition-colors group">
                                        <div className="w-10 h-10 bg-blue-600 rounded-full flex items-center justify-center text-white group-hover:scale-110 transition-transform"><Facebook size={20} /></div>
                                        <div className="flex-1"><div className="font-bold text-gray-800 text-sm">é†«ç ”éƒ¨å…¬é–‹ç²‰çµ²åœ˜</div><div className="text-xs text-gray-500">æ­¡è¿æŒ‰è®šè¿½è¹¤</div></div>
                                        <LinkIcon size={16} className="text-gray-400" />
                                    </a>
                                </div>
                            </div>
                            <div className="space-y-3 pt-2">
                                <button onClick={goToEventPage} className="w-full bg-brand-deep active:bg-brand-deep/90 text-white font-bold py-4 px-6 rounded-2xl shadow-lg shadow-brand-deep/20 transition-all flex items-center justify-center gap-2 tap-effect">
                                    <Home size={20} /> è¿”å›æ´»å‹•ç¶²é 
                                </button>
                            </div>
                        </div>
                    </div>
                );
            }

            return (
                <div className="min-h-screen bg-gradient-to-br from-brand-light via-brand-pale to-brand-accent/30 flex justify-center">
                    <div className="w-full max-w-md bg-white/40 min-h-screen shadow-2xl flex flex-col relative backdrop-blur-sm">
                        <div className="sticky top-0 z-50 glass-header px-5 py-3 flex items-center gap-3 shadow-sm">
                            <div className="w-12 h-12 bg-white rounded-lg shadow-sm p-1 flex-shrink-0 flex items-center justify-center border border-brand-light overflow-hidden">
                                <img src="https://i.meee.com.tw/AAiaMSR.png" alt="NTUH Logo" className="w-full h-full object-contain" />
                            </div>
                            <div className="flex flex-col justify-center">
                                <h1 className="text-sm font-bold text-brand-deep leading-tight tracking-wide">115å¹´åº¦è‡ºå¤§é†«ç™‚é«”ç³»</h1>
                                <h2 className="text-xs font-medium text-brand-deep/70 leading-tight mt-0.5">æ–°é€²ä¸»æ²»é†«å¸«èˆ‡é†«äº‹äººå“¡ç ”ç©¶ç‡Ÿ</h2>
                            </div>
                        </div>
                        <div className="flex-1 overflow-y-auto p-4 space-y-8 pb-28 no-scrollbar" ref={scrollRef}>
                            <div className="bg-brand-deep rounded-[2rem] p-6 text-white shadow-xl shadow-brand-deep/20 relative overflow-hidden group">
                                <div className="absolute -right-4 -top-4 w-32 h-32 bg-brand-accent rounded-full blur-2xl opacity-40 group-hover:scale-110 transition-transform duration-700"></div>
                                <div className="absolute -left-4 -bottom-4 w-24 h-24 bg-brand-secondary rounded-full blur-xl opacity-30 group-hover:scale-110 transition-transform duration-700"></div>
                                <h2 className="text-2xl font-bold mb-2 relative z-10">æ»¿æ„åº¦èª¿æŸ¥</h2>
                                <p className="text-brand-light text-sm opacity-90 leading-relaxed mb-4 relative z-10">æ„Ÿè¬åƒèˆ‡ï¼è«‹æ’¥å†—å¡«å¯«å•å·ï¼Œæ‚¨çš„æ„è¦‹æ˜¯æˆ‘å€‘é€²æ­¥çš„å‹•åŠ›ã€‚</p>
                                <div className="flex items-center gap-2 text-xs bg-white/10 border border-white/20 w-fit px-3 py-1.5 rounded-full backdrop-blur-md relative z-10"><span className="text-brand-pink">ğŸ“…</span><span>2026/03/06-07</span></div>
                            </div>
                            <div>
                                <h3 className={`text-xs font-bold uppercase tracking-widest mb-4 ml-2 flex items-center gap-2 ${errors.role || errors.campus ? 'text-red-500' : 'text-brand-deep/60'}`}><span className={`w-1 h-1 rounded-full ${errors.role || errors.campus ? 'bg-red-500' : 'bg-brand-deep'}`}></span>åŸºæœ¬è³‡æ–™ {(errors.role || errors.campus) && '(å¿…å¡«)'}</h3>
                                <div className={`p-4 rounded-2xl bg-white/50 space-y-4 ${errors.role || errors.campus ? 'border border-red-200 bg-red-50/50' : ''}`}>
                                    
                                    {/* Campus Selection */}
                                    <div>
                                        <label className="block text-sm font-bold text-brand-deep mb-2">æœå‹™é™¢å€</label>
                                        <div className="flex gap-2">
                                            {["ç¸½é™¢", "åˆ†é™¢"].map(opt => (
                                                <button 
                                                    key={opt}
                                                    type="button"
                                                    onClick={() => handleValueChange('campus', opt)}
                                                    className={`flex-1 py-2 rounded-xl text-sm font-medium transition-all duration-200 border-2 ${formData.campus === opt ? 'bg-brand-deep text-white border-brand-deep shadow-md' : 'bg-white text-gray-500 border-transparent hover:border-brand-medium'}`}
                                                >
                                                    {opt}
                                                </button>
                                            ))}
                                        </div>
                                    </div>

                                    {/* Role Selection (Grid) */}
                                    <div>
                                        <label className="block text-sm font-bold text-brand-deep mb-2">åƒåŠ èº«åˆ†</label>
                                        <div className="grid grid-cols-2 gap-2">
                                            {["é†«å¸«å­¸å“¡", "é†«äº‹ã€è­·ç†ã€æŠ€è¡“äººå“¡", "ç ”ç©¶äººå“¡", "å—é‚€è¬›è€…", "å—é‚€é•·å®˜"].map(role => (
                                                <SelectionCard key={role} label={role} selected={formData.role === role} onClick={() => handleValueChange('role', role)} />
                                            ))}
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div>
                                <h3 className="text-brand-deep/60 text-xs font-bold uppercase tracking-widest mb-4 ml-2 flex items-center gap-2"><span className="w-1 h-1 bg-brand-deep rounded-full"></span>è¬›é¡Œè©•åƒ¹</h3>
                                <RatingBlock title="è¬›é¡Œé›£æ˜“åº¦" value={formData.lectureDifficulty} onChange={v => handleRatingChange('lectureDifficulty', v)} required error={errors.lectureDifficulty} />
                                <RatingBlock title="è¬›é¡Œå¯¦ç”¨æ€§" value={formData.lecturePracticality} onChange={v => handleRatingChange('lecturePracticality', v)} required error={errors.lecturePracticality} />
                                <RatingBlock title="è¬›é¡Œæ™‚é–“è¦åŠƒ" value={formData.lectureTime} onChange={v => handleRatingChange('lectureTime', v)} required error={errors.lectureTime} />
                                <RatingBlock title="å…§å®¹å¸å¼•åŠ›" value={formData.lectureAttraction} onChange={v => handleRatingChange('lectureAttraction', v)} required error={errors.lectureAttraction} />
                                <RatingBlock title="èª²ç¨‹è¦åŠƒå®Œæ•´æ€§" value={formData.lectureCompleteness} onChange={v => handleRatingChange('lectureCompleteness', v)} required error={errors.lectureCompleteness} />
                            </div>
                            <div>
                                <h3 className="text-brand-deep/60 text-xs font-bold uppercase tracking-widest mb-4 ml-2 flex items-center gap-2"><span className="w-1 h-1 bg-brand-deep rounded-full"></span>æœ€æœ‰æ”¶ç©«èª²ç¨‹ (å¯å¤šé¸)</h3>
                                <div className="space-y-3">
                                    {lectureOptions.map((item, idx) => {
                                        const valStr = `${item.title} (${item.speaker})`;
                                        const isSelected = formData.bestLectures.includes(valStr);
                                        return (
                                            <div key={idx} onClick={() => handleCheckboxChange(valStr)} className={`tap-effect p-4 rounded-2xl border-2 transition-all duration-300 cursor-pointer relative overflow-hidden flex gap-3 items-start ${isSelected ? 'border-brand-deep bg-white shadow-md' : 'border-transparent bg-white/60 hover:bg-white hover:border-brand-medium'}`}>
                                                <div className={`mt-1 w-5 h-5 rounded-md flex-shrink-0 border flex items-center justify-center transition-all duration-300 ${isSelected ? 'bg-brand-deep border-brand-deep' : 'border-brand-medium bg-white'}`}>
                                                    {isSelected && <Check size={14} className="text-white" />}
                                                </div>
                                                <div className="flex flex-col flex-1">
                                                    <span className={`text-sm leading-tight mb-1 ${isSelected ? 'text-brand-deep font-bold' : 'text-gray-800 font-medium'}`}>{item.title}</span>
                                                    <div className="flex items-center gap-1 text-xs text-gray-500"><User size={12} className={isSelected ? 'text-brand-pink' : 'text-gray-400'} /><span className={isSelected ? 'text-brand-deep/80' : ''}>{item.speaker}</span></div>
                                                </div>
                                            </div>
                                        )
                                    })}
                                </div>
                            </div>
                            <div>
                                <h3 className="text-brand-deep/60 text-xs font-bold uppercase tracking-widest mb-4 ml-2 flex items-center gap-2"><span className="w-1 h-1 bg-brand-deep rounded-full"></span>æ·±åº¦å›é¥‹</h3>
                                <div className="glass-card rounded-[2rem] p-6 space-y-6">
                                    <div>
                                        <div className="flex justify-between items-center mb-2"><label className="font-bold text-brand-deep text-sm">æœ€è§¸å‹•æ‚¨çš„è¬›è€…èˆ‡åŸå›  <span className="text-brand-pink text-xs">â—</span></label>{formData.touchingSpeaker && <button onClick={() => handleRatingChange('touchingSpeaker', "")} className="text-gray-400 hover:text-brand-deep"><X size={14}/></button>}</div>
                                        <textarea className="w-full bg-brand-light/30 border border-transparent rounded-2xl p-4 text-brand-deep placeholder-brand-deep/40 focus:ring-2 focus:ring-brand-medium focus:bg-white focus:border-transparent transition-all text-sm resize-none" rows="4" placeholder="è«‹è¼¸å…¥æ‚¨çš„æƒ³æ³•..." value={formData.touchingSpeaker} onChange={(e) => handleRatingChange('touchingSpeaker', e.target.value)}></textarea>
                                    </div>
                                    <div className="h-px bg-brand-medium/30"></div>
                                    <div>
                                        <label className={`block font-bold mb-3 text-sm ${errors.researchHelp ? 'text-red-500' : 'text-brand-deep'}`}>å°ç ”ç©¶æœ‰å¹«åŠ©å—ï¼Ÿ {errors.researchHelp && '(å¿…å¡«)'}</label>
                                        <div className="flex gap-2">{["æœ‰", "æ²’æœ‰", "ç„¡æ„è¦‹"].map(opt => (<button key={opt} type="button" onClick={() => handleValueChange('researchHelp', opt)} className={`flex-1 py-3 rounded-xl text-sm font-medium transition-all duration-300 tap-effect border ${formData.researchHelp === opt ? 'bg-brand-deep text-white border-brand-deep shadow-lg shadow-brand-deep/20' : 'bg-white text-gray-500 border-transparent hover:border-brand-medium'}`}>{opt}</button>))}</div>
                                    </div>
                                    <div className="h-px bg-brand-medium/30"></div>
                                    <div>
                                        <label className={`block font-bold mb-3 text-sm ${errors.foundPartner ? 'text-red-500' : 'text-brand-deep'}`}>æ˜¯å¦æ‰¾åˆ°åˆä½œå¤¥ä¼´ï¼Ÿ {errors.foundPartner && '(å¿…å¡«)'}</label>
                                        <div className="flex gap-2">{["æ˜¯", "å¦"].map(opt => (<button key={opt} type="button" onClick={() => handleValueChange('foundPartner', opt)} className={`flex-1 py-3 rounded-xl text-sm font-medium transition-all duration-300 tap-effect border ${formData.foundPartner === opt ? 'bg-brand-deep text-white border-brand-deep shadow-lg shadow-brand-deep/20' : 'bg-white text-gray-500 border-transparent hover:border-brand-medium'}`}>{opt}</button>))}</div>
                                        {formData.foundPartner === 'æ˜¯' && (
                                            <div className="mt-4 animate-scaleIn">
                                                <label className={`block font-bold mb-2 text-sm ${errors.partnerCount ? 'text-red-500' : 'text-brand-deep'}`}>è«‹å•äººæ•¸ç´„å¹¾ä½ï¼Ÿ {errors.partnerCount && '(å¿…å¡«)'}</label>
                                                <select 
                                                    value={formData.partnerCount} 
                                                    onChange={(e) => handleValueChange('partnerCount', e.target.value)}
                                                    className="w-full bg-brand-light/30 border border-transparent rounded-xl p-3 text-brand-deep focus:ring-2 focus:ring-brand-medium focus:bg-white focus:border-transparent outline-none transition-all text-sm cursor-pointer"
                                                >
                                                    <option value="" disabled>è«‹é¸æ“‡äººæ•¸</option>
                                                    {[1, 2, 3, 4, 5, 6, 7, 8, 9, 10].map(num => (
                                                        <option key={num} value={num}>{num} ä½</option>
                                                    ))}
                                                </select>
                                            </div>
                                        )}
                                    </div>
                                </div>
                            </div>
                            <div>
                                <h3 className="text-brand-deep/60 text-xs font-bold uppercase tracking-widest mb-4 ml-2 flex items-center gap-2"><span className="w-1 h-1 bg-brand-deep rounded-full"></span>è¡Œæ”¿èˆ‡å ´åœ°</h3>
                                <RatingBlock title="å ´åœ°èˆ’é©æ€§" value={formData.venueComfort} onChange={v => handleRatingChange('venueComfort', v)} required error={errors.venueComfort} />
                                <RatingBlock title="äº¤é€šä¾¿åˆ©æ€§" value={formData.transport} onChange={v => handleRatingChange('transport', v)} required error={errors.transport} />
                                <RatingBlock title="æœå‹™å“è³ª" value={formData.serviceQuality} onChange={v => handleRatingChange('serviceQuality', v)} required error={errors.serviceQuality} />
                                <RatingBlock title="ç”¨é¤ç’°å¢ƒå“è³ª" value={formData.foodQuality} onChange={v => handleRatingChange('foodQuality', v)} required error={errors.foodQuality} />
                                <RatingBlock title="ä½å®¿èˆ’é©åº¦" value={formData.accomodation} onChange={v => handleRatingChange('accomodation', v)} required error={errors.accomodation} />
                            </div>
                            <div>
                                <h3 className="text-brand-deep/60 text-xs font-bold uppercase tracking-widest mb-4 ml-2 flex items-center gap-2"><span className="w-1 h-1 bg-brand-deep rounded-full"></span>æœªä¾†èˆ‡ç¸½çµ</h3>
                                <div className="glass-card rounded-[2rem] p-6 space-y-8">
                                    <div>
                                        <label className={`block font-bold mb-3 text-sm ${errors.futureTiming ? 'text-red-500' : 'text-brand-deep'}`}>å»ºè­°è¾¦ç†æ™‚é–“ {errors.futureTiming && '(å¿…å¡«)'}</label>
                                        <div className="grid grid-cols-3 gap-2">{["å‘¨é–“", "å‘¨äº”è‡³å‘¨å…­", "ç„¡æ„è¦‹"].map(opt => (<button key={opt} type="button" onClick={() => handleValueChange('futureTiming', opt)} className={`tap-effect py-3 px-1 rounded-xl text-xs font-bold transition-all border ${formData.futureTiming === opt ? 'bg-brand-accent text-brand-deep border-brand-accent shadow-md' : 'bg-white text-gray-500 border-transparent hover:border-brand-medium'}`}>{opt}</button>))}</div>
                                    </div>
                                    <div>
                                        <div className="flex justify-between items-center mb-2"><label className="block font-bold text-brand-deep text-sm">æœªä¾†è¦åŠƒå»ºè­°</label>{formData.suggestions && <button onClick={() => handleRatingChange('suggestions', "")} className="text-gray-400 hover:text-brand-deep"><X size={14}/></button>}</div>
                                        <textarea className="w-full bg-brand-light/30 border border-transparent rounded-2xl p-4 text-brand-deep placeholder-brand-deep/40 focus:ring-2 focus:ring-brand-medium focus:bg-white focus:border-transparent transition-all text-sm resize-none" rows="3" placeholder="è¬›é¡Œã€å ´åœ°ã€è¬›å¸«é¡å‹..." value={formData.suggestions} onChange={(e) => handleRatingChange('suggestions', e.target.value)}></textarea>
                                    </div>
                                    <div className="pt-4 border-t border-brand-medium/30">
                                        <label className={`block font-bold mb-4 text-lg text-center flex items-center justify-center gap-2 ${errors.overallSatisfaction ? 'text-red-500' : 'text-brand-deep'}`}><Heart size={20} className="text-brand-pink fill-brand-pink" />æ•´é«”æ»¿æ„åº¦ {errors.overallSatisfaction && '*'}</label>
                                        <div className="grid grid-cols-2 gap-2">{["éå¸¸æ»¿æ„", "æ»¿æ„", "æ™®é€š", "ä¸æ»¿æ„", "éå¸¸ä¸æ»¿æ„", "ç„¡æ„è¦‹"].map(opt => (<button key={opt} type="button" onClick={() => handleValueChange('overallSatisfaction', opt)} className={`tap-effect py-3 rounded-xl text-sm font-medium transition-all border-2 ${formData.overallSatisfaction === opt ? 'border-brand-deep bg-brand-deep text-white shadow-lg shadow-brand-deep/20' : 'border-transparent bg-brand-light/20 text-brand-deep hover:bg-brand-light hover:border-brand-medium'}`}>{opt}</button>))}</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div className="absolute bottom-0 left-0 right-0 p-4 pb-8 z-50 pointer-events-none">
                            <div className="pointer-events-auto glass-header rounded-[2rem] p-2 shadow-2xl shadow-brand-deep/20 border border-white/50">
                                <button onClick={handleSubmit} disabled={isSubmitting} className={`w-full bg-brand-deep text-white font-bold py-4 rounded-3xl shadow-lg shadow-brand-deep/30 flex items-center justify-center gap-2 text-lg tap-effect transition-all ${isSubmitting ? 'opacity-80 cursor-wait' : 'active:bg-brand-deep/90 active:scale-95'}`}>
                                    {isSubmitting ? <><Loader size={20} className="animate-spin" /><span>è³‡æ–™å‚³é€ä¸­...</span></> : <><span>é€å‡ºå•å·</span><Send size={20} /></>}
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>



